An attempt to translate the Java code to Python

